<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>Unblocked Arcade | Ultraviolet Proxy Hub</title>
  <link rel="stylesheet" href="style.css">
</head>
<body>
  <div class="app">
    <header class="site-header">
      <div class="brand">
        <span class="brand-mark">UV</span>
        <div>
          <p class="brand-title">Unblocked Arcade</p>
          <p class="brand-subtitle">Ultraviolet-powered access &amp; instant play</p>
        </div>
      </div>
      <nav class="site-nav">
        <a href="#games">Games</a>
        <a href="#proxy">Proxy</a>
        <a href="#features">Features</a>
      </nav>
      <button class="ghost-button" data-proxy-url="https://1v1.lol">Launch 1v1.LOL</button>
    </header>

    <main>
      <section class="hero">
        <div class="hero-content">
          <p class="eyebrow">Unblocked gaming &amp; browsing</p>
          <h1>Play your favorites with a built-in Ultraviolet proxy.</h1>
          <p class="hero-text">
            Use the proxy to launch any URL, or jump straight into curated unblocked titles. Everything lives
            in one clean dashboard that works on school networks.
          </p>
          <form class="proxy-form" id="proxy-form">
            <label class="field">
              <span>Enter a URL to launch</span>
              <input id="proxy-input" type="url" placeholder="https://example.com" autocomplete="off" required>
            </label>
            <button type="submit" class="primary-button">Launch with UV</button>
          </form>
          <p class="form-hint" id="proxy-status">Ultraviolet backend required at <code>/uv/</code> and <code>/bare/</code>.</p>
          <div class="hero-actions">
            <button class="chip" data-proxy-url="https://now.gg">Now.gg</button>
            <button class="chip" data-proxy-url="https://shellshock.io">Shell Shockers</button>
            <button class="chip" data-proxy-url="https://krunker.io">Krunker</button>
            <button class="chip" data-proxy-url="https://geforcenow.com">GeForce NOW</button>
          </div>
        </div>
        <div class="hero-card">
          <h2>Quick Launch</h2>
          <ul>
            <li><span>Proxy status:</span> <strong id="proxy-indicator">Ready</strong></li>
            <li><span>Session mode:</span> <strong>Stealth</strong></li>
            <li><span>Top category:</span> <strong>Battle Royale</strong></li>
          </ul>
          <button class="secondary-button" data-proxy-url="https://tetr.io">Launch TETR.IO</button>
        </div>
      </section>

      <section class="games" id="games">
        <div class="section-header">
          <h2>Featured unblocked games</h2>
          <div class="search">
            <input id="game-search" type="search" placeholder="Search games">
          </div>
        </div>
        <div class="games-grid" id="games-grid">
          <article class="game-card" data-title="1v1.lol" data-proxy-url="https://1v1.lol">
            <h3>1v1.LOL</h3>
            <p>Build, shoot, and climb the ranked ladder.</p>
            <button class="primary-button">Play now</button>
          </article>
          <article class="game-card" data-title="ev.io" data-proxy-url="https://ev.io">
            <h3>EV.IO</h3>
            <p>Futuristic FPS with parkour movement.</p>
            <button class="primary-button">Play now</button>
          </article>
          <article class="game-card" data-title="slope" data-proxy-url="https://slopegame.io">
            <h3>Slope</h3>
            <p>Fast-paced neon runner challenge.</p>
            <button class="primary-button">Play now</button>
          </article>
          <article class="game-card" data-title="retro bowl" data-proxy-url="https://retrobowl.me">
            <h3>Retro Bowl</h3>
            <p>Classic football management and play.</p>
            <button class="primary-button">Play now</button>
          </article>
          <article class="game-card" data-title="basketball stars" data-proxy-url="https://basketball-stars.co">
            <h3>Basketball Stars</h3>
            <p>2v2 hoops with slick arcade controls.</p>
            <button class="primary-button">Play now</button>
          </article>
          <article class="game-card" data-title="minecraft classic" data-proxy-url="https://classic.minecraft.net">
            <h3>Minecraft Classic</h3>
            <p>Build together in the original sandbox.</p>
            <button class="primary-button">Play now</button>
          </article>
        </div>
      </section>

      <section class="proxy" id="proxy">
        <div class="proxy-panel">
          <div>
            <h2>Ultraviolet proxy controls</h2>
            <p>
              Plug in a UV backend and configure your preferred prefix below. This page automatically detects
              <code>window.__uv$config</code> if it exists.
            </p>
          </div>
          <label class="field">
            <span>UV prefix</span>
            <input id="uv-prefix" type="text" value="/uv/" autocomplete="off">
          </label>
        </div>
        <div class="proxy-stats">
          <div>
            <h3>Smart encoding</h3>
            <p>Uses UV encodeUrl when available for maximum compatibility.</p>
          </div>
          <div>
            <h3>Instant launch</h3>
            <p>Buttons and game cards route through the proxy in one click.</p>
          </div>
          <div>
            <h3>Clean fallback</h3>
            <p>If UV isn't detected, the proxy still opens with safe encoding.</p>
          </div>
        </div>
      </section>

      <section class="features" id="features">
        <div class="section-header">
          <h2>Why this setup rocks</h2>
        </div>
        <div class="feature-grid">
          <div>
            <h3>Minimal UI</h3>
            <p>High-contrast layout with fast access to every game.</p>
          </div>
          <div>
            <h3>Curated picks</h3>
            <p>Swap the links in the HTML to expand your catalog.</p>
          </div>
          <div>
            <h3>Proxy-first</h3>
            <p>Everything routes through UV to stay unblocked.</p>
          </div>
        </div>
      </section>
    </main>

    <footer class="site-footer">
      <p>Unblocked Arcade &middot; Powered by Ultraviolet</p>
    </footer>
  </div>

  <script src="/uv/uv.bundle.js"></script>
  <script src="/uv/uv.config.js"></script>
  <script>
    const proxyForm = document.querySelector('#proxy-form');
    const proxyInput = document.querySelector('#proxy-input');
    const proxyStatus = document.querySelector('#proxy-status');
    const proxyIndicator = document.querySelector('#proxy-indicator');
    const uvPrefixInput = document.querySelector('#uv-prefix');
    const gameSearch = document.querySelector('#game-search');
    const gamesGrid = document.querySelector('#games-grid');

    const normalizeUrl = (value) => {
      const trimmed = value.trim();
      if (!trimmed) {
        return '';
      }
      if (!/^https?:\/\//i.test(trimmed)) {
        return `https://${trimmed}`;
      }
      return trimmed;
    };

    const getUvConfig = () => {
      if (window.__uv$config && window.__uv$config.encodeUrl) {
        return window.__uv$config;
      }
      return null;
    };

    const getPrefix = () => {
      const prefixValue = uvPrefixInput.value.trim() || '/uv/';
      if (prefixValue.endsWith('/')) {
        return prefixValue;
      }
      return `${prefixValue}/`;
    };

    const buildProxyUrl = (targetUrl) => {
      const config = getUvConfig();
      const prefix = getPrefix();
      if (config) {
        return `${prefix}${config.encodeUrl(targetUrl)}`;
      }
      return `${prefix}service/${encodeURIComponent(targetUrl)}`;
    };

    const launchProxy = (rawUrl) => {
      const url = normalizeUrl(rawUrl);
      if (!url) {
        proxyStatus.textContent = 'Enter a valid URL to launch.';
        proxyStatus.dataset.state = 'error';
        return;
      }
      const proxiedUrl = buildProxyUrl(url);
      window.open(proxiedUrl, '_blank', 'noopener');
      proxyStatus.textContent = `Launching ${url} with Ultraviolet...`;
      proxyStatus.dataset.state = 'success';
    };

    const updateIndicator = (state) => {
      proxyIndicator.textContent = state;
    };

    const registerServiceWorker = async () => {
      if (!('serviceWorker' in navigator)) {
        proxyStatus.textContent = 'Service workers are not supported in this browser.';
        proxyStatus.dataset.state = 'error';
        updateIndicator('Unsupported');
        return;
      }

      try {
        await navigator.serviceWorker.register('/uv/uv.sw.js', { scope: '/' });
        updateIndicator(getUvConfig() ? 'Detected' : 'Ready');
      } catch (error) {
        proxyStatus.textContent = 'Failed to register Ultraviolet service worker.';
        proxyStatus.dataset.state = 'error';
        updateIndicator('Offline');
      }
    };

    proxyForm.addEventListener('submit', (event) => {
      event.preventDefault();
      launchProxy(proxyInput.value);
    });

    document.querySelectorAll('[data-proxy-url]').forEach((button) => {
      button.addEventListener('click', () => {
        launchProxy(button.dataset.proxyUrl);
      });
    });

    gameSearch.addEventListener('input', (event) => {
      const term = event.target.value.trim().toLowerCase();
      const cards = gamesGrid.querySelectorAll('.game-card');
      cards.forEach((card) => {
        const title = card.dataset.title || '';
        card.style.display = title.includes(term) ? 'flex' : 'none';
      });
    });

    registerServiceWorker();
  </script>
</body>
</html>
